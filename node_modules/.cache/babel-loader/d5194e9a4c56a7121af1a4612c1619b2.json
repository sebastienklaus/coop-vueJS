{"remainingRequest":"/home/sklaus/Bureau/coop/node_modules/babel-loader/lib/index.js!/home/sklaus/Bureau/coop/node_modules/cache-loader/dist/cjs.js??ref--1-0!/home/sklaus/Bureau/coop/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/sklaus/Bureau/coop/src/views/Conversation.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/sklaus/Bureau/coop/src/views/Conversation.vue","mtime":1643899741981},{"path":"/home/sklaus/Bureau/coop/babel.config.js","mtime":1642404375261},{"path":"/home/sklaus/Bureau/coop/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/sklaus/Bureau/coop/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/sklaus/Bureau/coop/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/sklaus/Bureau/coop/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHBvc3Rlck1lc3NhZ2UgZnJvbSAnLi4vY29tcG9uZW50cy9wb3N0ZXJNZXNzYWdlLnZ1ZSc7CmltcG9ydCBNZXNzYWdlIGZyb20gJy4uL2NvbXBvbmVudHMvTWVzc2FnZS52dWUnOwpleHBvcnQgZGVmYXVsdCB7CiAgY29tcG9uZW50czogewogICAgcG9zdGVyTWVzc2FnZTogcG9zdGVyTWVzc2FnZSwKICAgIE1lc3NhZ2U6IE1lc3NhZ2UKICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICAvLyAgaWQ6IHRoaXMuJHJvdXRlLnBhcmFtcy5pZCwKICAgICAgY29udmVyc2F0aW9uOiBbXSwKICAgICAgbWVzc2FnZXM6IFtdCiAgICB9OwogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgdGhpcy5nZXRNZXNzYWdlKCk7CiAgICBjb25zb2xlLmxvZyh0aGlzLiRyb3V0ZS5wYXJhbXMpOwogICAgdGhpcy4kYXBpLmdldCgiY2hhbm5lbHMvIi5jb25jYXQodGhpcy4kcm91dGUucGFyYW1zLmlkKSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgaWYgKHJlc3BvbnNlLmRhdGEgPT09IG51bGwpIHsKICAgICAgICAvL3NpIGwnaWQgbidlc3QgcGFzIGJvbiwgCiAgICAgICAgLy9vbiBlc3QgZGlyaWfDqSB2ZXJzIGxhIHBhZ2UgZCdhY2N1ZWlsIChsaXN0IGRlcyBjb252ZXJzYXRpb25zKQogICAgICAgIF90aGlzLiRyb3V0ZXIucHVzaCgnLycpOwogICAgICB9CgogICAgICBfdGhpcy5jb252ZXJzYXRpb24gPSByZXNwb25zZS5kYXRhOwogICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgIF90aGlzLmZsYXNoTWVzc2FnZS5zaG93KHsKICAgICAgICBzdGF0dXM6ICJlcnJvciIsCiAgICAgICAgdGl0bGU6ICJTb21ldGhpbmcgd2VudCB3cm9uZyA6KCIsCiAgICAgICAgbWVzc2FnZTogZXJyb3IucmVzcG9uc2UuZGF0YS5tZXNzYWdlCiAgICAgIH0pOwogICAgfSk7CiAgICB0aGlzLiRidXMuJG9uKCdjaGFyZ2VyLW1lc3NhZ2UnLCBmdW5jdGlvbiAobWVzc2FnZSkgewogICAgICAvLyBsZSBwYXJhbcOodHJlIG1lc3NhZ2Ugbidlc3QgcGFzIHV0aWxlLCBvbiB0cm91dmVyYSBsZSBtZXNzYWdlCiAgICAgIC8vIGFsbGFudCBjaGVyY2hlciB0b3VzIGxlcyBtZXNzYWdlIGRhbnMgbGUgY3VycmVudCBjaGFubmVsCiAgICAgIC8vICBjb25zb2xlLmxvZyhtZXNzYWdlKTsKICAgICAgX3RoaXMuZ2V0TWVzc2FnZSgpOyAvLyB0aGlzLm1lc3NhZ2UucHVzaChtZXNzYWdlKTsKCiAgICB9KTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGdldE1lc3NhZ2U6IGZ1bmN0aW9uIGdldE1lc3NhZ2UoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgdGhpcy4kYXBpLmdldCgiY2hhbm5lbHMvIi5jb25jYXQodGhpcy4kcm91dGUucGFyYW1zLmlkLCAiL3Bvc3RzIikpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgX3RoaXMyLm1lc3NhZ2VzID0gcmVzcG9uc2UuZGF0YTsKICAgICAgfSk7CiAgICB9LAogICAgcmVtb3ZlQ29udmVyc2F0aW9uOiBmdW5jdGlvbiByZW1vdmVDb252ZXJzYXRpb24oKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgdGhpcy4kYXBpLmRlbGV0ZSgiY2hhbm5lbHMvIi5jb25jYXQodGhpcy4kcm91dGUucGFyYW1zLmlkKSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBhbGVydCgnVm90cmUgY29udmVyc2F0aW9uIGEgYmllbiDDqXTDqSBzdXBwcmltw6knKTsKCiAgICAgICAgX3RoaXMzLiRyb3V0ZXIucHVzaCgnLycpOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICBhbGVydChlcnJvci5yZXNwb25zZS5kYXRhLm1lc3NhZ2UpOwogICAgICB9KTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["Conversation.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;AAqBA,OAAA,aAAA,MAAA,iCAAA;AACA,OAAA,OAAA,MAAA,2BAAA;AACA,eAAA;AACA,EAAA,UAAA,EAAA;AACA,IAAA,aAAA,EAAA,aADA;AAEA,IAAA,OAAA,EAAA;AAFA,GADA;AAKA,EAAA,IALA,kBAKA;AACA,WAAA;AACA;AACA,MAAA,YAAA,EAAA,EAFA;AAGA,MAAA,QAAA,EAAA;AAHA,KAAA;AAKA,GAXA;AAYA,EAAA,OAZA,qBAYA;AAAA;;AACA,SAAA,UAAA;AACA,IAAA,OAAA,CAAA,GAAA,CAAA,KAAA,MAAA,CAAA,MAAA;AACA,SAAA,IAAA,CACA,GADA,oBACA,KAAA,MAAA,CAAA,MAAA,CAAA,EADA,GAEA,IAFA,CAEA,UAAA,QAAA,EAAA;AACA,UAAA,QAAA,CAAA,IAAA,KAAA,IAAA,EAAA;AACA;AACA;AACA,QAAA,KAAA,CAAA,OAAA,CAAA,IAAA,CAAA,GAAA;AAEA;;AACA,MAAA,KAAA,CAAA,YAAA,GAAA,QAAA,CAAA,IAAA;AAEA,KAXA,EAYA,KAZA,CAYA,UAAA,KAAA,EAAA;AACA,MAAA,KAAA,CAAA,YAAA,CAAA,IAAA,CAAA;AACA,QAAA,MAAA,EAAA,OADA;AAEA,QAAA,KAAA,EAAA,yBAFA;AAGA,QAAA,OAAA,EAAA,KAAA,CAAA,QAAA,CAAA,IAAA,CAAA;AAHA,OAAA;AAKA,KAlBA;AAmBA,SAAA,IAAA,CAAA,GAAA,CAAA,iBAAA,EAAA,UAAA,OAAA,EAAA;AACA;AACA;AACA;AACA,MAAA,KAAA,CAAA,UAAA,GAJA,CAKA;;AACA,KANA;AAOA,GAzCA;AA0CA,EAAA,OAAA,EAAA;AACA,IAAA,UADA,wBACA;AAAA;;AACA,WAAA,IAAA,CAAA,GAAA,oBAAA,KAAA,MAAA,CAAA,MAAA,CAAA,EAAA,aAAA,IAAA,CAAA,UAAA,QAAA,EAAA;AACA,QAAA,MAAA,CAAA,QAAA,GAAA,QAAA,CAAA,IAAA;AACA,OAFA;AAGA,KALA;AAMA,IAAA,kBANA,gCAMA;AAAA;;AACA,WAAA,IAAA,CACA,MADA,oBACA,KAAA,MAAA,CAAA,MAAA,CAAA,EADA,GAEA,IAFA,CAEA,UAAA,QAAA,EAAA;AACA,QAAA,KAAA,CAAA,wCAAA,CAAA;;AACA,QAAA,MAAA,CAAA,OAAA,CAAA,IAAA,CAAA,GAAA;AACA,OALA,EAMA,KANA,CAMA,UAAA,KAAA,EAAA;AACA,QAAA,KAAA,CAAA,KAAA,CAAA,QAAA,CAAA,IAAA,CAAA,OAAA,CAAA;AACA,OARA;AASA;AAhBA;AA1CA,CAAA","sourcesContent":["<template>\n   <div>\n        <Header/>\n              <section class=\"section\">\n                      <h4 class=\"title is-4 has-text-centered\">Détail de conversation</h4>\n                        <div class=\"box\" v-if=\"conversation\">\n                           <p><b>{{conversation.topic}}</b></p>\n                           <p>{{conversation.label}}</p><br/>\n                           <a @click=\"removeConversation()\" class=\"button button is-dark\">Delete</a>\n                              <!-- <router-link  div=\"box\" class=\"button button is-dark\" :to=\"{name : 'deleteConversation', params :{id:conversation.id}}\"> delete conversation</router-link> -->\n                        </div>\n                        <posterMessage :conversation=\"conversation\"/>\n                        <div v-for=\"message in messages\" :key=\"message.id\">\n                           <Message :message=\"message\" />\n                        </div>\n               </section>\n         <FlashMessage></FlashMessage>\n   </div>\n</template>\n\n<script>\nimport posterMessage from '../components/posterMessage.vue';\nimport Message from '../components/Message.vue';\nexport default {\n   components : {\n      posterMessage,\n      Message,\n   },\n    data(){\n       return {\n         //  id: this.$route.params.id,\n          conversation: [],\n          messages: []\n       }\n    },\n    mounted() {\n       this.getMessage();\n       console.log(this.$route.params);\n       this.$api\n       .get(`channels/${this.$route.params.id}`)\n       .then((response) => {\n          if(response.data === null ) {\n             //si l'id n'est pas bon, \n             //on est dirigé vers la page d'accueil (list des conversations)\n             this.$router.push('/');\n             \n          }\n          this.conversation = response.data;\n\n       })\n       .catch((error) => {\n          this.flashMessage.show({\n            status: \"error\",\n            title: \"Something went wrong :(\",\n            message: error.response.data.message,\n          });\n        });\n       this.$bus.$on('charger-message', message => {\n          // le paramètre message n'est pas utile, on trouvera le message\n          // allant chercher tous les message dans le current channel\n         //  console.log(message);\n          this.getMessage();\n         // this.message.push(message);\n       });\n    },\n    methods: {\n       getMessage() {\n          this.$api.get(`channels/${this.$route.params.id}/posts`).then(response => {\n             this.messages = response.data;\n          })\n       },\n       removeConversation(){\n      this.$api\n       .delete(`channels/${this.$route.params.id}`)\n       .then((response) => {\n        alert('Votre conversation a bien été supprimé');\n        this.$router.push('/');\n      })\n      .catch((error) => {\n        alert(error.response.data.message);\n      });\n    },\n    }\n}\n</script>\n\n<style>\n</style>"],"sourceRoot":"src/views"}]}